<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BSU Chat - Bakƒ± D√∂vl…ôt Universiteti</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <!-- Ana konteyner -->
    <div id="app">
        <!-- Giri≈ü Ekranƒ± -->
        <div id="welcome-screen" class="screen active">
            <div class="welcome-container">
                <div class="logo-container">
                    <div class="logo-circle">üéì</div>
                    <h1>BSU Chat</h1>
                    <p>Bakƒ± D√∂vl…ôt Universiteti</p>
                </div>
                
                <div class="welcome-buttons">
                    <button onclick="showScreen('login-screen')" class="btn btn-primary">
                        <span>üë§</span> Daxil ol
                    </button>
                    <button onclick="showScreen('register-screen')" class="btn btn-secondary">
                        <span>üìù</span> Qeydiyyat
                    </button>
                    <button onclick="showScreen('admin-login-screen')" class="btn btn-admin">
                        <span>‚öôÔ∏è</span> Admin Paneli
                    </button>
                </div>
            </div>
        </div>

        <!-- Giri≈ü Ekranƒ± -->
        <div id="login-screen" class="screen">
            <div class="auth-container">
                <button onclick="showScreen('welcome-screen')" class="btn-back">‚Üê Geri</button>
                
                <div class="logo-circle-small">üéì</div>
                <h2>Admin Paneli</h2>
                <p class="subtitle">Hesabƒ±nƒ±za daxil olun</p>
                
                <form id="login-form" onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label>ƒ∞stifad…ô√ßi adƒ±</label>
                        <input type="text" id="login-email-prefix" placeholder="istifad…ô√ßi adƒ±" required>
                        <div class="email-suffix">@bsu.edu.az</div>
                    </div>
                    
                    <div class="form-group">
                        <label>≈ûifr…ô</label>
                        <input type="password" id="login-password" placeholder="≈ûifr…ôniz" required>
                    </div>
                    
                    <button type="submit" class="btn btn-primary full-width">Daxil ol</button>
                </form>
            </div>
        </div>

        <!-- Qeydiyyat Ekranƒ± -->
        <div id="register-screen" class="screen">
            <div class="auth-container">
                <button onclick="showScreen('welcome-screen')" class="btn-back">‚Üê Geri</button>
                
                <div class="logo-circle-small">üéì</div>
                <h2>Qeydiyyat</h2>
                <p class="subtitle">Yeni hesab yaradƒ±n</p>
                
                <form id="register-form" onsubmit="handleRegister(event)">
                    <div class="form-group">
                        <label>Ad Soyad</label>
                        <input type="text" id="register-fullname" placeholder="Ad Soyadƒ±nƒ±z" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Email</label>
                        <input type="text" id="register-email-prefix" placeholder="istifad…ô√ßi adƒ±" required>
                        <div class="email-suffix">@bsu.edu.az</div>
                    </div>
                    
                    <div class="form-group">
                        <label>Telefon</label>
                        <div class="phone-input">
                            <span class="phone-prefix">+994</span>
                            <input type="tel" id="register-phone" placeholder="XXXXXXXXX" 
                                   pattern="[0-9]{9}" maxlength="9" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>≈ûifr…ô</label>
                        <input type="password" id="register-password" placeholder="≈ûifr…ôniz" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Fak√ºlt…ô</label>
                        <select id="register-faculty" required>
                            <option value="">Fak√ºlt…ô se√ßin</option>
                            <option value="Mexanika-riyaziyyat fak√ºlt…ôsi">Mexanika-riyaziyyat fak√ºlt…ôsi</option>
                            <option value="T…ôtbiqi riyaziyyat v…ô kibernetika fak√ºlt…ôsi">T…ôtbiqi riyaziyyat v…ô kibernetika fak√ºlt…ôsi</option>
                            <option value="Fizika fak√ºlt…ôsi">Fizika fak√ºlt…ôsi</option>
                            <option value="Kimya fak√ºlt…ôsi">Kimya fak√ºlt…ôsi</option>
                            <option value="Biologiya fak√ºlt…ôsi">Biologiya fak√ºlt…ôsi</option>
                            <option value="Ekologiya v…ô torpaq≈ü√ºnaslƒ±q fak√ºlt…ôsi">Ekologiya v…ô torpaq≈ü√ºnaslƒ±q fak√ºlt…ôsi</option>
                            <option value="Coƒürafiya fak√ºlt…ôsi">Coƒürafiya fak√ºlt…ôsi</option>
                            <option value="Geologiya fak√ºlt…ôsi">Geologiya fak√ºlt…ôsi</option>
                            <option value="Filologiya fak√ºlt…ôsi">Filologiya fak√ºlt…ôsi</option>
                            <option value="Tarix fak√ºlt…ôsi">Tarix fak√ºlt…ôsi</option>
                            <option value="Beyn…ôlxalq m√ºnasib…ôtl…ôr v…ô iqtisadiyyat fak√ºlt…ôsi">Beyn…ôlxalq m√ºnasib…ôtl…ôr v…ô iqtisadiyyat fak√ºlt…ôsi</option>
                            <option value="H√ºquq fak√ºlt…ôsi">H√ºquq fak√ºlt…ôsi</option>
                            <option value="Jurnalistika fak√ºlt…ôsi">Jurnalistika fak√ºlt…ôsi</option>
                            <option value="ƒ∞nformasiya v…ô s…ôn…ôd menecmenti fak√ºlt…ôsi">ƒ∞nformasiya v…ô s…ôn…ôd menecmenti fak√ºlt…ôsi</option>
                            <option value="≈û…ôrq≈ü√ºnaslƒ±q fak√ºlt…ôsi">≈û…ôrq≈ü√ºnaslƒ±q fak√ºlt…ôsi</option>
                            <option value="Sosial elml…ôr v…ô psixologiya fak√ºlt…ôsi">Sosial elml…ôr v…ô psixologiya fak√ºlt…ôsi</option>
                        </select>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>D…ôr…ôc…ô</label>
                            <select id="register-degree" required>
                                <option value="">Se√ßin</option>
                                <option value="bakalavr">Bakalavr</option>
                                <option value="magistr">Magistr</option>
                                <option value="doktorantura">Doktorantura</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Kurs</label>
                            <select id="register-course" required>
                                <option value="">Se√ßin</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                            </select>
                        </div>
                    </div>
                    
                    <button type="button" onclick="showVerification()" class="btn btn-primary full-width">
                        N√∂vb…ôti ‚Üí
                    </button>
                </form>
            </div>
        </div>

        <!-- Doƒürulama Ekranƒ± -->
        <div id="verification-screen" class="screen">
            <div class="auth-container">
                <button onclick="showScreen('register-screen')" class="btn-back">‚Üê Geri</button>
                
                <div class="logo-circle-small">‚úÖ</div>
                <h2>Doƒürulama</h2>
                <p class="subtitle">3 sualdan minimum 2-ni doƒüru cavablandƒ±rƒ±n</p>
                
                <div id="verification-questions"></div>
                
                <button onclick="submitRegistration()" class="btn btn-primary full-width">
                    Qeydiyyatƒ± Tamamla
                </button>
            </div>
        </div>

        <!-- Admin Giri≈ü Ekranƒ± -->
        <div id="admin-login-screen" class="screen">
            <div class="auth-container">
                <button onclick="showScreen('welcome-screen')" class="btn-back">‚Üê Geri</button>
                
                <div class="logo-circle-small">‚öôÔ∏è</div>
                <h2>Admin Paneli</h2>
                <p class="subtitle">Admin giri≈üi</p>
                
                <form id="admin-login-form" onsubmit="handleAdminLogin(event)">
                    <div class="form-group">
                        <label>ƒ∞stifad…ô√ßi adƒ±</label>
                        <input type="text" id="admin-username" placeholder="Admin istifad…ô√ßi adƒ±" required>
                    </div>
                    
                    <div class="form-group">
                        <label>≈ûifr…ô</label>
                        <input type="password" id="admin-password" placeholder="Admin ≈üifr…ôsi" required>
                    </div>
                    
                    <button type="submit" class="btn btn-admin full-width">Daxil ol</button>
                </form>
            </div>
        </div>

        <!-- Chat Ekranƒ± -->
        <div id="chat-screen" class="screen">
            <div class="chat-container">
                <!-- Header -->
                <div class="chat-header">
                    <div class="header-left">
                        <button onclick="showFaculties()" class="btn-icon">‚ò∞</button>
                        <div class="header-info">
                            <h3 id="current-room-name">BSU Chat</h3>
                            <p id="daily-topic"></p>
                        </div>
                    </div>
                    <div class="header-right">
                        <button onclick="showProfile()" class="btn-icon">üë§</button>
                        <button onclick="showRules()" class="btn-icon">üìã</button>
                        <button onclick="handleLogout()" class="btn-icon">üö™</button>
                    </div>
                </div>

                <!-- Fak√ºlt…ôl…ôr Sidebar -->
                <div id="faculties-sidebar" class="sidebar">
                    <div class="sidebar-header">
                        <h3>Fak√ºlt…ôl…ôr</h3>
                        <button onclick="hideFaculties()" class="btn-close">‚úï</button>
                    </div>
                    <div class="faculties-list" id="faculties-list"></div>
                </div>

                <!-- Mesajlar -->
                <div class="messages-container" id="messages-container"></div>

                <!-- Mesaj Input -->
                <div class="message-input-container">
                    <input type="text" id="message-input" placeholder="Mesajƒ±nƒ±zƒ± yazƒ±n..." 
                           onkeypress="if(event.key === 'Enter') sendMessage()">
                    <button onclick="sendMessage()" class="btn-send">üì§</button>
                </div>
            </div>
        </div>

        <!-- Admin Panel Ekranƒ± -->
        <div id="admin-panel-screen" class="screen">
            <div class="admin-container">
                <div class="admin-sidebar">
                    <h2>‚öôÔ∏è Admin Panel</h2>
                    <nav class="admin-nav">
                        <a href="#" onclick="showAdminSection('rules')" class="nav-item active">üìã Qaydalar</a>
                        <a href="#" onclick="showAdminSection('about')" class="nav-item">‚ÑπÔ∏è Haqqƒ±nda</a>
                        <a href="#" onclick="showAdminSection('users')" class="nav-item">üë• ƒ∞stifad…ô√ßil…ôr</a>
                        <a href="#" onclick="showAdminSection('suspicious')" class="nav-item">‚ö†Ô∏è ≈û√ºbh…ôli Hesablar</a>
                        <a href="#" onclick="showAdminSection('topic')" class="nav-item">üì∞ G√ºn√ºn M√∂vzusu</a>
                        <a href="#" onclick="showAdminSection('filter')" class="nav-item">üö´ Filtr</a>
                        <a href="#" onclick="showAdminSection('delete-time')" class="nav-item">‚è∞ Mesaj Silinm…ô Vaxtƒ±</a>
                        <a href="#" onclick="showAdminSection('sub-admins')" class="nav-item">üëî Alt Adminl…ôr</a>
                    </nav>
                    <button onclick="handleAdminLogout()" class="btn btn-admin full-width">√áƒ±xƒ±≈ü</button>
                </div>
                
                <div class="admin-content">
                    <div id="admin-rules" class="admin-section active">
                        <h2>üìã Qaydalar</h2>
                        <textarea id="rules-textarea" rows="10" placeholder="Qaydalarƒ± buraya yazƒ±n..."></textarea>
                        <button onclick="saveRules()" class="btn btn-primary">Yadda saxla</button>
                    </div>
                    
                    <div id="admin-about" class="admin-section">
                        <h2>‚ÑπÔ∏è Haqqƒ±nda</h2>
                        <textarea id="about-textarea" rows="10" placeholder="Haqqƒ±nda m…ôlumatƒ± buraya yazƒ±n..."></textarea>
                        <button onclick="saveAbout()" class="btn btn-primary">Yadda saxla</button>
                    </div>
                    
                    <div id="admin-users" class="admin-section">
                        <h2>üë• ƒ∞stifad…ô√ßil…ôr (<span id="users-count">0</span>)</h2>
                        <div id="users-table"></div>
                    </div>
                    
                    <div id="admin-suspicious" class="admin-section">
                        <h2>‚ö†Ô∏è ≈û√ºbh…ôli Hesablar (8+ ≈ûikay…ôt)</h2>
                        <div id="suspicious-table"></div>
                    </div>
                    
                    <div id="admin-topic" class="admin-section">
                        <h2>üì∞ G√ºn√ºn M√∂vzusu</h2>
                        <input type="text" id="topic-input" placeholder="G√ºn√ºn m√∂vzusunu yazƒ±n...">
                        <button onclick="saveTopic()" class="btn btn-primary">Yadda saxla</button>
                    </div>
                    
                    <div id="admin-filter" class="admin-section">
                        <h2>üö´ Nalayiq S√∂zl…ôr Filtri</h2>
                        <p>S√∂zl…ôri verg√ºl (,) il…ô ayƒ±rƒ±n</p>
                        <textarea id="filter-textarea" rows="5" placeholder="s√∂z1,s√∂z2,s√∂z3"></textarea>
                        <button onclick="saveFilter()" class="btn btn-primary">Yadda saxla</button>
                    </div>
                    
                    <div id="admin-delete-time" class="admin-section">
                        <h2>‚è∞ Mesaj Avtomatik Silinm…ô Vaxtƒ±</h2>
                        <div class="form-group">
                            <label>Qrup Chat Mesajlarƒ± (d…ôqiq…ô)</label>
                            <input type="number" id="group-delete-time" min="0" placeholder="0 = s√∂nd√ºr√ºl√ºb">
                        </div>
                        <div class="form-group">
                            <label>≈û…ôxsi Mesajlar (d…ôqiq…ô)</label>
                            <input type="number" id="private-delete-time" min="0" placeholder="0 = s√∂nd√ºr√ºl√ºb">
                        </div>
                        <button onclick="saveDeleteTime()" class="btn btn-primary">Yadda saxla</button>
                    </div>
                    
                    <div id="admin-sub-admins" class="admin-section">
                        <h2>üëî Alt Adminl…ôr</h2>
                        <div class="create-sub-admin">
                            <h3>Yeni Alt Admin Yarat</h3>
                            <div class="form-group">
                                <label>ƒ∞stifad…ô√ßi adƒ±</label>
                                <input type="text" id="sub-admin-username" placeholder="ƒ∞stifad…ô√ßi adƒ±">
                            </div>
                            <div class="form-group">
                                <label>≈ûifr…ô</label>
                                <input type="password" id="sub-admin-password" placeholder="≈ûifr…ô">
                            </div>
                            <button onclick="createSubAdmin()" class="btn btn-primary">Yarat</button>
                        </div>
                        <div id="sub-admins-list"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Profil Modalƒ± -->
        <div id="profile-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>üë§ Profil</h3>
                    <button onclick="hideProfile()" class="btn-close">‚úï</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>Ad Soyad</label>
                        <input type="text" id="profile-fullname">
                    </div>
                    <div class="form-group">
                        <label>Fak√ºlt…ô</label>
                        <select id="profile-faculty"></select>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>D…ôr…ôc…ô</label>
                            <select id="profile-degree">
                                <option value="bakalavr">Bakalavr</option>
                                <option value="magistr">Magistr</option>
                                <option value="doktorantura">Doktorantura</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Kurs</label>
                            <select id="profile-course">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button onclick="updateProfile()" class="btn btn-primary">Yadda saxla</button>
                    <button onclick="hideProfile()" class="btn btn-secondary">L…ôƒüv et</button>
                </div>
            </div>
        </div>

        <!-- Qaydalar Modalƒ± -->
        <div id="rules-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>üìã Qaydalar</h3>
                    <button onclick="hideRules()" class="btn-close">‚úï</button>
                </div>
                <div class="modal-body">
                    <div id="rules-content"></div>
                </div>
                <div class="modal-footer">
                    <button onclick="hideRules()" class="btn btn-primary">Baƒüla</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.socket.io/4.6.1/socket.io.min.js"></script>
    <script src="/app.js"></script>
</body>
</html>
